(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,a){e.exports=a(39)},34:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),s=a(8),i=a.n(s),r=a(9),c=a.n(r),o=(a(34),a(35),a(36),a(14)),h=a(3),u=a(4),d=a(6),m=a(5),p=a(7),f=a(17),g=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.visualizer?"glyphicon glyphicon-th":"glyphicon glyphicon-th-list";return l.a.createElement("nav",{className:"navbar navbar-inverse navbar-fixed-top"},l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",{className:"navbar-header"},l.a.createElement("a",{className:"navbar-brand"},l.a.createElement("img",{id:"react-framework",src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K"})),!this.props.visualizer&&l.a.createElement("a",{className:"navbar-brand",href:"#"},"Your Advertisement Here!"),this.props.visualizer&&l.a.createElement("a",{href:"https://github.com/react-tools/react-table",target:"_blank"},l.a.createElement("img",{src:"https://github.com/react-tools/media/raw/master/logo-react-table.png",style:{width:"150px",margin:".5em auto .3em","background-color":"white"}}))),l.a.createElement("div",{id:"navbar"},l.a.createElement("div",{className:"navbar-form navbar-right"},l.a.createElement("label",{className:"btn btn-default btn-file"},l.a.createElement("span",{className:"glyphicon glyphicon-file file-browsing-icon"}),"Browse ",l.a.createElement("input",{id:"navbar-input-file",type:"file",accept:".csv",onChange:this.props.handleOnFileChange})),l.a.createElement("button",{className:"btn btn-default csv-visualizer-toggle",onClick:this.props.handleCsvVisualizerToggle},l.a.createElement("span",{className:e}))),l.a.createElement("p",{className:"navbar-text navbar-right"},this.props.currentFilename))))}}]),t}(n.Component),b=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.keys.map(function(t){return l.a.createElement("li",{key:t.fieldname},l.a.createElement("div",{className:"checkbox"},l.a.createElement("label",null,l.a.createElement("input",{name:t.fieldname,type:"checkbox",checked:t.display,onChange:function(a){e.props.onChangeShowField(a,t)}}),t.fieldname)))});return l.a.createElement("div",{className:"col-sm-3 col-md-2 sidebar"},l.a.createElement("div",{className:"page-header"},l.a.createElement("div",{className:"checkbox"},l.a.createElement("label",null,l.a.createElement("input",{name:"showAll",type:"checkbox",checked:this.props.showAll,onChange:this.props.onChangeShowAll}),"Show All"))),l.a.createElement("div",{className:"page-body"},l.a.createElement("ul",{className:"nav nav-sidebar"},t)))}}]),t}(n.Component),v=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openModal=function(){a.setState({modalIsOpen:!0})},a.focusModalCloseButton=function(){a.modalCloseButton.current.focus()},a.closeModal=function(){a.setState({modalIsOpen:!1})},a.handleInfoClick=function(){alert('Unlike the "search" feature in the table view which searches by columns, this search attempts to find a match across all columns. For large datasets, the first search will be slow for the first query as an index must be built. Subsequent queries will use this index and be relatively fast.\n            \n            Notes:\n              1. The user must press "enter" to perform a search\n              2. Any error will highlight the search box in orange\n              3. Successful searches will highlight search box in cornflower blue\n              \n            Caveat emptor: An orange search box denotes an error. The app will be in an inconsistent state when you see the orange search box. While UI elements will continue to work and data can still be perused results may be confusing. CLEAR the search box or FIX the search string and resubmit before resuming!\n        ')},a.state={modalIsOpen:!1},a.modalCloseButton=l.a.createRef(),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.row,t=this.props.keys.filter(function(e){return e.display}).map(function(t){return l.a.createElement(l.a.Fragment,{key:t.fieldname},l.a.createElement("dt",null,t.fieldname),l.a.createElement("dd",null,e[t.fieldname]))}),a=this.props.showingSearch?"showing-search-results-info":"hiding-search-results-info",n=this.props.searchException?"search-exception":"no-search-exception-"+a;return l.a.createElement("div",{className:"col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main"},l.a.createElement("div",{className:"page-header text-center"},l.a.createElement("div",{id:"main-form-bar"},l.a.createElement("div",{className:"form-inline pull-left"},l.a.createElement("div",{className:"panel panel-default"},l.a.createElement("div",{className:"panel-body"},"Rows: ",this.props.dataLengthOG),l.a.createElement("div",{className:"panel-body"},"Absolute index: ",this.props.absoluteIndex))),l.a.createElement("div",{className:"form-inline"},l.a.createElement("div",{className:"main-panel-form-group-2 input-group"},l.a.createElement("div",{className:"input-group-btn"},l.a.createElement("button",{className:"btn btn-default",onClick:this.props.handleSearchInputClear},"Clear"),l.a.createElement("button",{className:"btn btn-default",onClick:this.openModal},l.a.createElement("span",{className:"glyphicon glyphicon-question-sign"})),l.a.createElement(c.a,{className:"modal-dialog",isOpen:this.state.modalIsOpen,onAfterOpen:this.focusModalCloseButton,onRequestClose:this.closeModal,shouldReturnFocusAfterClose:!1},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h4",{className:"modal-title text-center"},"Item View Search Functionality")),l.a.createElement("div",{className:"modal-body"},l.a.createElement("span",null,'Unlike the "search" feature in the table view which searches by columns, this search feature attempts to find a match across all columns. For large datasets, the first query will be slow as an index must be built; subsequent queries should be relatively fast.'),l.a.createElement("p",null),l.a.createElement("p",null,"Notes:",l.a.createElement("ul",null,l.a.createElement("li",null,'User must press "enter" while in the search box to perform a search'),l.a.createElement("li",null,"Successful searches will highlight search box in cornflower blue"),l.a.createElement("li",null,"Unsuccessful searches will highlight the search box in orange"))),l.a.createElement("p",null),l.a.createElement("h5",null,"Caveat emptor:"),"An orange search box denotes an error. The app will be in an inconsistent state when you see the orange search box. While UI elements will continue to work and data can still be perused results may be confusing. CLEAR the search box or FIX the search string and resubmit before resuming!"),l.a.createElement("div",{className:"modal-footer"},l.a.createElement("button",{type:"button",className:"btn btn-default",ref:this.modalCloseButton,onClick:this.closeModal,onKeyPress:this.closeModal},"Close"))))),l.a.createElement("input",{id:n,className:"form-control text-center ",type:"text",value:this.props.inputSearch,onChange:this.props.handleSearchInputChange,onKeyPress:this.props.handleSearchRequest,placeholder:"Global Search ..."})),l.a.createElement("div",{className:"main-panel-form-group-1"},l.a.createElement("button",{className:"btn btn-default",onClick:this.props.handlePreviousClick,onKeyPress:this.props.handlePreviousClick},"Previous"),l.a.createElement("button",{className:"btn btn-default",onClick:this.props.handleNextClick,onKeyPress:this.props.handleNextClick},"Next"),l.a.createElement("input",{id:a,className:"form-control text-center",type:"text",value:this.props.inputIndex,onChange:this.props.handleTextInputChange,onKeyPress:this.props.handleOnSubmit}))),l.a.createElement("div",{className:"form-inline pull-right "+a},l.a.createElement("div",{className:"panel panel-default panel-search-results-info"},l.a.createElement("div",{className:"panel-body"},"Search results: ",this.props.displayIndex," of ",this.props.dataLength))))),l.a.createElement("div",{className:"dl-horizontal"},t))}}]),t}(n.Component),x=a(16),y=(a(37),function(e,t){return String(t[e.id])===e.value}),I=function(e,t){var a=new RegExp(e.value,"i");return a.test(t[e.id])},E=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.data.map(function(e){return e}),t=[{Header:"Row",accessor:"fsuuid",filterable:!0,filterMethod:y,maxWidth:100}],a=this.props.keys.filter(function(e){return e.display}).map(function(e){return{Header:e.fieldname,accessor:e.fieldname}}),n=0===a.length?[]:t.concat(a);return l.a.createElement("div",{className:"col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main"},l.a.createElement(x.a,{data:e,columns:n,filterable:!0,defaultFilterMethod:I,showPaginationTop:!1,showPaginationBottom:!0,pageSizeOptions:[1,5,10,25,50,100],defaultPageSize:100,style:{height:"90vh"},className:"-striped -highlight"}))}}]),t}(n.Component),C=a(15),w=a.n(C),S=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleOnFileChange=function(e){if(0!==e.target.files.length){var t=e.target.files[0],n=t.name,l=t.size/1e6,s=new FileReader;s.onload=function(e){var t=Object(f.a)(e.target.result),s=Object.keys(t[0]).map(function(e){return{fieldname:e,display:!0,search:!1}}),i=t.map(function(e,t){return Object.assign({},Object(o.a)({},a.uuid,t+1),e)});a.setState({currentFilename:n,fileSize:l,absoluteIndex:1,actualIndex:0,displayIndex:1,inputIndex:1,showAll:!0,keys:s,data:i,dataLengthOG:i.length,dataOG:i.map(function(e){return e})}),console.log(i[0])},console.log(n+" is: "+l+" MB"),s.readAsText(t)}},a.onChangeShowAll=function(e){var t=e.target.checked,n=a.state.keys.map(function(e){return{fieldname:e.fieldname,display:t,search:e.search}});a.setState({showAll:t,keys:n})},a.onChangeShowField=function(e,t){var n=a.state.keys.map(function(a){return a.fieldname===t.fieldname?{fieldname:t.fieldname,display:e.target.checked,search:t.search}:a}),l=!0;n.forEach(function(e){l=l&&e.display}),a.setState({showAll:l,keys:n})},a.handlePreviousClick=function(e){"click"!==e.type&&"Enter"!==e.key||a.setState(function(e){if(e.actualIndex>0){var t=e.actualIndex-1;return{absoluteIndex:e.data[t][a.uuid],actualIndex:t,displayIndex:t+1,inputIndex:t+1}}return null})},a.handleNextClick=function(e){"click"!==e.type&&"Enter"!==e.key||a.setState(function(e){if(e.actualIndex>=0&&e.actualIndex<e.data.length-1){var t=e.actualIndex+1;return{absoluteIndex:e.data[t][a.uuid],actualIndex:t,displayIndex:t+1,inputIndex:t+1}}return null})},a.handleTextInputChange=function(e){var t=e.target.value;a.setState({inputIndex:t})},a.handleOnSubmit=function(e){"Enter"===e.key&&a.setState(function(e){var t=+e.inputIndex;return Number.isInteger(t)&&t>0&&t<=e.data.length?{absoluteIndex:e.data[t-1][a.uuid],actualIndex:t-1,displayIndex:t}:(alert("input "+e.inputIndex+" is invalid"),null)})},a.handleSearchInputChange=function(e){var t=e.target.value;a.setState({inputSearch:t})},a.handleSearchInputClear=function(){a.setState(function(e){return{absoluteIndex:1,actualIndex:0,displayIndex:1,inputIndex:1,inputSearch:"",data:e.dataOG.map(function(e){return e}),searchException:!1,showingSearch:!1}})},a.handleSearchException=function(){a.setState({searchException:!0})},a.handleSearchRequest=function(e){if("Enter"===e.key){if(0===a.state.inputSearch.length)return void a.handleSearchInputClear();if(null===a.cachedIndex){var t=a.state.dataOG.map(function(e){return e}),n=a.state.keys.map(function(e){return e.fieldname}),l=a.uuid;a.cachedIndex=new w.a({doc:{id:l,field:n}}),console.log("building flexsearch index"),a.cachedIndex.add(t),console.log("done building flexsearch index")}var s=a.state.keys.filter(function(e){return e.display}).map(function(e){return e.fieldname});if(0===s.length)return a.handleSearchException(),void alert("Cannot search without choosing at least one field to display");var i=a.cachedIndex.search({query:a.state.inputSearch,field:s});if(0===i.length)return a.handleSearchException(),void alert("No matches found: "+a.state.inputSearch);a.setState({absoluteIndex:i[0][a.uuid],actualIndex:0,displayIndex:1,inputIndex:1,data:i.map(function(e){return e}),searchException:!1,showingSearch:!0})}},a.handleCsvVisualizerToggle=function(){a.setState(function(e){return{visualizer:!e.visualizer}})},a.state={currentFilename:"Selected File",fileSize:0,absoluteIndex:0,actualIndex:-1,displayIndex:0,inputIndex:0,showAll:!1,inputSearch:"",keys:[],data:[],dataLengthOG:0,dataOG:[],searchException:!1,showingSearch:!1,visualizer:!1},a.uuid="fsuuid",a.cachedIndex=null,a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){this.state.visualizer;return l.a.createElement(l.a.Fragment,null,l.a.createElement(g,{currentFilename:this.state.currentFilename,handleOnFileChange:this.handleOnFileChange,visualizer:this.state.visualizer,handleCsvVisualizerToggle:this.handleCsvVisualizerToggle}),l.a.createElement("div",{className:"row"},l.a.createElement(b,{keys:this.state.keys,showAll:this.state.showAll,onChangeShowField:this.onChangeShowField,onChangeShowAll:this.onChangeShowAll}),!this.state.visualizer&&l.a.createElement(v,{handlePreviousClick:this.handlePreviousClick,handleNextClick:this.handleNextClick,absoluteIndex:this.state.absoluteIndex,displayIndex:this.state.displayIndex,inputIndex:this.state.inputIndex,handleTextInputChange:this.handleTextInputChange,handleOnSubmit:this.handleOnSubmit,dataLengthOG:this.state.dataLengthOG,dataLength:this.state.data.length,row:this.state.data[this.state.actualIndex],keys:this.state.keys,inputSearch:this.state.inputSearch,handleSearchInputChange:this.handleSearchInputChange,handleSearchRequest:this.handleSearchRequest,handleSearchInputClear:this.handleSearchInputClear,searchException:this.state.searchException,showingSearch:this.state.showingSearch}),this.state.visualizer&&l.a.createElement(E,{data:this.state.data,keys:this.state.keys})))}}]),t}(n.Component);a(38);var k=function(){return l.a.createElement("div",{className:"App"},l.a.createElement("div",{className:"container-fluid"},l.a.createElement(S,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.setAppElement("#root"),i.a.render(l.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[18,1,2]]]);
//# sourceMappingURL=main.8231b0ec.chunk.js.map